<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>手机充值</title>
    <!-- 引入 WeUI -->
    <link href="css/weui.min.css" rel="stylesheet" />
    <link href="css/jquery-weui.min.css" rel="stylesheet" />
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-weui.min.js"></script>
    <script src="js/template-web.js"></script>
    <script src="js/common.js"></script>
    <style>
        .weui-cell:before {
            right: 15px;
        }

        .mobile_focus {
            font-weight: 600;
        }
        /*style的第一种样式*/
        .able_ul {
            list-style: none;
            width: 100%;
        }
        .able_ul li {
            float: left;
            border: 1px solid green;
            height: 70px;
            text-align: center;
            width: 29.1%;
            line-height: 17.5px;
            border-radius: 5px;
            margin-right: 5%;
            margin-bottom: 10px;
            color: green;
        }
        .able_ul li p {
            margin-top: 17.5px;
        }

        .able_ul li span {
            font-size: 10px;
        }
        /*style的第二种样式*/
        .unable_ul {
            list-style: none;
            width: 100%;
        }
        .unable_ul li {
            float: left;
            border: 1px solid #CACACA;
            height: 70px;
            text-align: center;
            width: 29.1%;
            line-height: 70px;
            border-radius: 5px;
            margin-right: 5%;
            margin-bottom: 10px;
            color: #CACACA;
        }
        .unable_ul li span {
            display: none;
            font-size: 10px;
        }
        ul li:nth-child(3n+0) {
            margin-right: 0%;
        }

        .liuliang_unable {
            float: left;
            border: 1px solid #CACACA;
            height: 70px;
            text-align: center;
            width: 29.1%;
            line-height: 70px;
            border-radius: 5px;
            margin-right: 5%;
            margin-bottom: 10px;
            color: #CACACA;
        }

        .liuliang_able {
            float: left;
            border: 1px solid green;
            height: 70px;
            text-align: center;
            width: 29.1%;
            line-height: 70px;
            border-radius: 5px;
            margin-right: 5%;
            margin-bottom: 10px;
            color: green;
        }

        /*设置input的placeholder的样式*/
        :-moz-placeholder { /* Mozilla Firefox 4 to 18 */
            color: green;
            opacity: 1;
        }

        ::-moz-placeholder { /* Mozilla Firefox 19+ */
            color: green;
            opacity: 1;
        }

        input:-ms-input-placeholder {
            color: green;
            opacity: 1;
        }

        input::-webkit-input-placeholder {
            color: green;
            opacity: 1;
        }
    </style>
</head>
<body ontouchstart style="background-color: #eee">
    <div class="weui-cells weui-cells_form" style="margin-top: 0px;">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input mobile_blur" type="tel" name="mobile" maxlength="13" placeholder="请输入手机号码" autofocus="autofocus"
                       style="height: 30px; font-size: 21px;width:90%">
                <a class="weui-icon-clear" style="display: inline-block;margin: auto;margin-bottom: 5px; display:none;"></a>
                <input class="weui-input tip" type="text" style="height: 16px; font-size: 12px;
                    color: #ccc;display: inherit" readonly="readonly" disabled="disabled" value="移动 联通 电信">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p style="height: 18px; font-size: 14px; color: #cacaca; margin-bottom: 10px;">
                    充话费
                </p>
                <div style="display: block; width: 100%">
                    <ul class="unable_ul">
                        <li>
                            <p>
                                30元
                            </p>
                            <span>售价:99.99</span>
                        </li>
                        <li>
                            <p>
                                50元
                            </p>
                            <span>售价:99.99</span>
                        </li>
                        <li>
                            <p>
                                100元
                            </p>
                            <span>售价:99.99</span>
                        </li>
                        <li>
                            <p>
                                200元
                            </p>
                            <span>售价:99.99</span>
                        </li>
                        <li>
                            <p>
                                300元
                            </p>
                            <span>售价:99.99</span>
                        </li>
                        <li>
                            <p>
                                500元
                            </p>
                            <span>售价:99.99</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p style="height: 18px; font-size: 14px; color: #cacaca; margin-bottom: 10px;">
                    充流量
                </p>
                <div style="display: block; width: 100%">
                    <p id="other" class="liuliang_unable">
                        选流量包
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!--bottom-->
    <div class="hw_bottom" style="font-size: 12px; background-color: #eee; padding-top: 3px;
        color: #0B346E; text-align: center; position: fixed; bottom: 0px; width: 100%; z-index:-100">
        <a class="recharge_record">充值记录</a>
        <a style="display: inline-block; background-color: #0B346E; margin: 0px 3px; margin-right: 4px;height: 10px; width: 1px;"></a>
        <a class="kehu_help">客服帮助</a>
        <a style="display: inline-block; background-color: #0B346E; margin: 0px 3px; margin-right: 4px;height: 10px; width: 1px;"></a>
        <a href="tel:4008111801" style="color:#0B346E">客服电话</a>
        <div style="margin-bottom: 5px;">
            <a style="display: inline-block; color: #91989F;">手机充值服务由四川千行你我科技有限公司提供</a>
        </div>
    </div>
</body>
</html>
<script id="contentTemplate" type="text/html">
    <ul class="unable_ul">
        {{each list as item i}}
        <li>
            <p>{{item.face>10?50:110}}元{{i}}</p>
            <span>售价:{{item.fee}}</span>
        </li>
        {{/each}}
    </ul>
</script>
<!--<script src="js/page/home.js"></script>-->
<script type="text/javascript">
    $(function () {
        data = {
            list: [{ face: 100, fee: 99 }, { face: 100, fee: 99 }, { face: 100, fee: 99 }]
        }
        var html = template('contentTemplate', data)
        $('ul').html(html);
        
    });
    //$(function () {
    //    localStorage.removeItem("payTip"); //清除缓存
    //    $('.kehu_help').on("click", function () {
    //        localStorage.setItem("recharge_mobile", $('input[name=mobile]').val());
    //        location.href = "/hwFAQ.html";
    //    });

    //    //充流量包
    //    $('#other').on("click", function () {
    //        if ($(this).hasClass("liuliang_able")) {
    //            var account = hw_getInfo();
    //            if (account) {
    //                //登录华为生活账号
    //                localStorage.setItem("recharge_mobile", $('input[name=mobile]').val());
    //                localStorage.setItem("orderinfo", JSON.stringify({
    //                    account: account, //华为生活账号
    //                    product_name: '',
    //                    mobile: '', //充值的手机号
    //                    product_id: '', //产品编号
    //                    face: '', //面值
    //                    price: '', //售价,
    //                    card_type: 2, //充值类型 1-话费 2-流量
    //                    flow_type: ''//流量类型
    //                }));
    //                location.href = "/hwrechareflow.html";
    //            }
    //        }
    //    });

    //    //清除输入框的值
    //    $('.weui-icon-clear').on("click", function () {
    //        $('input[name=mobile]').val('');
    //        $('input[name=mobile]').removeClass("mobile_focus");
    //        $(this).hide();
    //        //关闭效果
    //        $('#tip').val("移动 联通 电信");
    //        $('#tip').css("color", "#ccc");
    //        if ($('ul').hasClass("able_ul")) {
    //            $('ul').removeClass("able_ul").addClass("unable_ul");
    //        }
    //        if ($('#other').hasClass("liuliang_able")) {
    //            $('#other').removeClass("liuliang_able").addClass("liuliang_unable");
    //            $('#tuijian_img').hide();//隐藏推荐图片
    //        }
    //        $('input[name=mobile]').focus();
    //    });

    //    //页面初始化的时候进行
    //    $('input[name=mobile]').val(localStorage.getItem("recharge_mobile"));
    //    var ph = $('input[name=mobile]').val();
    //    if (ph.length == 13) {
    //        $('.weui-icon-clear').show();
    //        ph = ph.replace(/\D/g, '');
    //        LoadMobile(ph);
    //    }

    //    //失去焦点的时候
    //    $('input[name=mobile]').on("blur", function () {
    //        setTimeout(function () {
    //            $('.hw_bottom').show();
    //        }, 1000)
    //    })

    //    //输入手机号码效果的切换
    //    $('input[name=mobile]').on("keyup", function (e) {
    //        var value = $(this).val();
    //        if (e.keyCode != 8) {
    //            if (/^[0-9]*$/.test(value.substr(value.length - 1, 1))) {
    //                if (value.length == 4 || value.length == 9) {
    //                    var i = value.length;
    //                    value = client.string.insert(value, i - 1, " ");
    //                    $(this).val(value);
    //                }
    //            }
    //            else {
    //                $(this).val(value.substr(0, value.length - 1));
    //                if ($(this).val().length == 0)
    //                    $(this).removeClass("mobile_focus");
    //            }
    //        }
    //        else {
    //            //回退按键的处理
    //            if (value.length == 9 || value.length == 4)
    //                value = $(this).val(value.trim());
    //            if (value.length < 13) {
    //                //关闭效果
    //                $('#tip').val("移动 联通 电信");
    //                $('#tip').css("color", "#ccc");
    //            }
    //            if ($('ul').hasClass("able_ul")) {
    //                $('ul').removeClass("able_ul").addClass("unable_ul");
    //            }
    //            if ($('#other').hasClass("liuliang_able")) {
    //                $('#other').removeClass("liuliang_able").addClass("liuliang_unable");
    //                $('#tuijian_img').hide(); //隐藏推荐图片
    //            }
    //        }
    //    });

    //    //样式的切换
    //    $('input[name=mobile]').on("input", function () {
    //        var value = $(this).val();
    //        if (value.length > 0) $('.weui-icon-clear').show();
    //        if (!$(this).hasClass("mobile_focus")) {
    //            $(this).addClass("mobile_focus");
    //        }
    //        if (value.length == 0) {
    //            $('.weui-icon-clear').hide();
    //            $(this).removeClass("mobile_focus");
    //        }
    //        if (value.replace(/\D/g, '').length > 0 && client.regex.isPhone(value.replace(/\D/g, ''))) {
    //            //如果直接赋值号码
    //            value = value.replace(/\D/g, '');
    //            value = client.string.insert(value, 3, ' ');
    //            value = client.string.insert(value, 8, ' ');
    //            $(this).val(value);
    //        }
    //        if (value.trim().length == 13) {
    //            $('.weui-icon-clear').show();
    //            $(this).blur(); //失去焦点
    //            value = value.replace(/\D/g, '');
    //            //判断检查号码的区段
    //            if (client.regex.isPhone(value)) {
    //                //interfaceType 1-获取好码归属地 2-获取产品
    //                LoadMobile(value);
    //            }
    //            else {
    //                setTimeout(function () {
    //                    $.toast("手机号码格式错误", "cancel");
    //                }, 500);
    //            }
    //        }
    //    });

    //    //判断号码区段
    //    function LoadMobile(value) {
    //        client.ajax.ajaxRequest("/HWServer/MobileQuery.ashx", { sPhone: value, interfaceType: 1 }, function (r) {
    //            if (r.code == 100 && r.data.carrierNo) {
    //                $('#tip').val(r.data.provinceNo + r.data.carrierNo);
    //                $('#tip').css("color", "green");
    //                $('#other').removeClass("liuliang_unable").addClass("liuliang_able");
    //                if (ImgIsShow) $('#tuijian_img').show(); //显示推荐图片
    //                loadProduct(value);
    //            }
    //            else {
    //                $.toast("无效的号码", "cancel");
    //            }
    //        });
    //    }

    //    //根据手机号码加载产品列表
    //    function loadProduct(phone) {
    //        client.ajax.ajaxRequest("/HWServer/MobileQuery.ashx", { sPhone: phone, interfaceType: 2, businessType: 1 }, function (r) {
    //            if (r.code == 100) {
    //                var array = r.data;
    //                var html = [];
    //                $(array).each(function () {
    //                    html.push('<li data-productId="' + this.productID + '"  data-businessType="' + this.businessType + '" data-flowType="' + this.flowType + '">');
    //                    html.push('<p  data-face="' + this.face + '">' + this.face + '元</p>');
    //                    html.push('<span data-fee="' + this.fee + '">售价:' + this.fee + '</span>');
    //                    html.push('</li>');
    //                });
    //                if (array.length > 0) {
    //                    $('ul').html('').append(html.join(''));
    //                    $('ul').removeClass("unable_ul").addClass("able_ul");
    //                    $('#other').removeClass("liuliang_unable").addClass("liuliang_able");

    //                    //绑定点击事件
    //                    $('ul li').on("click", function () {
    //                        if ($('ul').hasClass("able_ul")) {
    //                            var productId = $(this).attr("data-productId");
    //                            var face = $(this).find('p').attr("data-face");
    //                            var fee = $(this).find('span').attr("data-fee");
    //                            var flow_type = $(this).attr("data-flowType");
    //                            var businessType = $(this).attr("data-businessType");
    //                            var product_name = "充话费-" + face + "元";
    //                            //获取账户信息
    //                            var account = hw_getInfo();
    //                            if (account) {
    //                                var show_mobile = client.string.insert(phone, 3, ' ');
    //                                show_mobile = client.string.insert(show_mobile, 8, ' ');
    //                                localStorage.setItem("recharge_mobile", show_mobile);
    //                                localStorage.setItem("orderinfo", JSON.stringify({
    //                                    businessType: businessType,
    //                                    account: account, //华为生活账号
    //                                    product_name: product_name,
    //                                    mobile: phone, //充值的手机号
    //                                    product_id: productId, //产品编号
    //                                    face: face, //面值
    //                                    price: fee, //售价,
    //                                    card_type: 1, //充值类型 1-话费 2-流量
    //                                    flow_type: flow_type//流量类型
    //                                }));
    //                                location.href = "/hwpayment.html";
    //                            }
    //                        }
    //                    });
    //                }
    //            } else {
    //                $.toast(r.msg, "cancel");
    //            }
    //        });
    //    }
    //});
</script>
